- load static from staticfiles
- load tz
- load i18n
- load submission

- submission_layout submission profile_id user editable_problem_ids completed_problem_ids

td.sub-result(class=submission.result_class)
    .score
        if submission.is_graded
            if submission.status in 'IECEAB'
                | ---
            else
                | #{submission.case_points|floatformat:"0"} / #{submission.case_total|floatformat:"0"}
        else
            i.fa.fa-spinner.fa-pulse
    .state
        span.status(title=submission.long_status)= submission.short_status
        = ' | '
        span.language #{submission.language.short_display_name}

td(colspan=info_colspan, class=('sub-info sub-info-grading' if submission.status == 'G' else 'sub-info'))
    if show_problem
        .name
            a(href='{% url "problem_detail" submission.problem.code %}') #{problem_name}
    div
        span(class=submission.user.css_class)
            a(href='{% url "user_page" submission.user.user.username %}') #{submission.user.user.username}
        = ' '
        span.time(data-unix='{{ submission.date|utc|date:"c" }}')
            - blocktrans with time=submission.date|date:_("N j, Y, g:i a") asvar str_time
                | on {{ time }}
            span.relative= str_time
        if not IN_CONTEST and submission.contest_or_none
            = ' '
            a(href='{% url "contest_view" submission.contest_or_none.participation.contest.key %}').submission-contest
                i.fa.fa-dot-circle-o(title=submission.contest_or_none.participation.contest.name)

if submission.status == 'G'
    td.sub-testcase
        if submission.current_testcase > 0
            | {% trans "Case " %}##{submission.current_testcase}
        else
            | ...

if can_view
    td.sub-prop
        a(href='{% url "submission_status" submission.id %}')
            i.fa.fa-eye.fa-fw
            span.label {% trans "view" %}
        if perms.judge.rejudge_submission
            = ' · '
            a(href='#', onclick='rejudge_submission({{ submission.id }}, event);return false')
                i.fa.fa-refresh.fa-fw
                span.label {% trans "rejudge" %}
        if perms.judge.change_submission
            = ' · '
            a(href='{% url "admin:judge_submission_change" submission.id %}')
                i.fa.fa-cog.fa-fw
                span.label {% trans "admin" %}

td.sub-usage
    if submission.status in 'QUPGCEIEAB'
        .time ---
        .memory ---
    else
        if "TLE" != submission.result
            .time(title='{{ submission.time|default_if_none:0 }}s') #{submission.time|default_if_none:0|floatformat:"2"}s
        else
            .time ---
        .memory= submission.memory_bytes|filesizeformat
